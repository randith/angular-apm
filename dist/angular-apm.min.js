angular.module("perfMonitor",[]).factory("perfMonitor",["$http",function(e){"use strict";var n="$digest",r=!1,t={},i=[],a=0,o=!0;return{disable:function(){o=!1},enable:function(){o=!0},startMarker:function(e){if(o){if(e in t)return console.warn("Tried to create duplicate active performance marker name: "+e),void 0;t[e]=new Date,a++}},endMarker:function(c){if(o){if(!c in t)return console.warn("Tried to end nonexistent performance marker: "+c),void 0;var f=new Date-t[c];if(i.push(c+":"+f),delete t[c],a--,0===a){if(r&&c!==n)return;this.disable();var s=this;e({method:"GET",url:"img/beacon.png",params:{metrics:encodeURI(""+i)}}).then(function(){i=[],s.enable()})}}},monitorDigest:function(e){if(o){r=!0;var t=e.$digest,i=this;e.$digest=function(){i.startMarker(n),t.apply(e),i.endMarker(n)}}}}}]);